{"version":3,"file":"bundle.js","sources":["../src/index.js"],"sourcesContent":["var domtoimage = require('dom-to-image-more');\r\nvar fileSaver = require('file-saver');\r\n\r\nL.Control.EasyPrint = L.Control.extend({\r\n  options: {\r\n    title: 'Print map',\r\n    position: 'topleft',\r\n    sizeModes: ['Current'],\r\n    filename: 'map',\r\n    outputMode: 'blob', //[print, download, blob] \r\n    hidden: false,\r\n    tileWait: 500,\r\n    hideControlContainer: true,\r\n    hideClasses: [],\r\n    customWindowTitle: window.document.title,\r\n    spinnerBgCOlor: '#0DC5C1',\r\n    customSpinnerClass: 'epLoader',\r\n    defaultSizeTitles: {\r\n      Current: 'Current Size',\r\n      A4Landscape: 'A4 Landscape',\r\n      A4Portrait: 'A4 Portrait'\r\n    }\r\n  },\r\n\r\n  onAdd: function () { \r\n    this.mapContainer = this._map.getContainer();\r\n    this.options.sizeModes = this.options.sizeModes.map(function (sizeMode) {\r\n      if (sizeMode === 'Current') {\r\n        return {\r\n          name: this.options.defaultSizeTitles.Current,\r\n          className: 'CurrentSize'\r\n        }\r\n      }\r\n      if (sizeMode === 'A4Landscape') {\r\n        return {\r\n          height: this._a4PageSize.height,\r\n          width: this._a4PageSize.width,\r\n          name: this.options.defaultSizeTitles.A4Landscape,\r\n          className: 'A4Landscape page'\r\n        }\r\n      }\r\n      if (sizeMode === 'A4Portrait') {\r\n        return {\r\n          height: this._a4PageSize.width,\r\n          width: this._a4PageSize.height,\r\n          name: this.options.defaultSizeTitles.A4Portrait,\r\n          className: 'A4Portrait page'\r\n        }\r\n      };\r\n      return sizeMode;\r\n    }, this);\r\n    \r\n    var container = L.DomUtil.create('div', 'leaflet-control-easyPrint leaflet-bar leaflet-control');\r\n    if (!this.options.hidden) {\r\n      this._addCss();\r\n\r\n      L.DomEvent.addListener(container, 'mouseover', this._togglePageSizeButtons, this);\r\n      L.DomEvent.addListener(container, 'mouseout', this._togglePageSizeButtons, this);\r\n      L.DomEvent.on(container, \"click\", function (ev) {L.DomEvent.stopPropagation (ev)});\r\n      \r\n      var btnClass = 'leaflet-control-easyPrint-button'\r\n      if (this.options.outputMode === 'download') btnClass = btnClass + '-export'\r\n\r\n      this.link = L.DomUtil.create('a', btnClass, container);\r\n      this.link.id = \"leafletEasyPrint\";\r\n      this.link.title = this.options.title;\r\n      this.holder = L.DomUtil.create('ul', 'easyPrintHolder', container);\r\n\r\n      this.options.sizeModes.forEach(function (sizeMode) {\r\n        var btn = L.DomUtil.create('li', 'easyPrintSizeMode', this.holder);\r\n        btn.title = sizeMode.name;\r\n        var link = L.DomUtil.create('a', sizeMode.className, btn);\r\n        L.DomEvent.addListener(btn, 'click', this.printMap, this);\r\n      }, this);\r\n\r\n      L.DomEvent.disableClickPropagation(container);\r\n    }\r\n    return container;\r\n  },\r\n\r\n  printMap: async function (event, filename) {\r\n    if (filename) {\r\n      this.options.filename = filename\r\n    }\r\n    if (this.options.outputMode === 'print') {\r\n      this._page = window.open(\"\", \"_blank\", 'toolbar=no,status=no,menubar=no,scrollbars=no,resizable=no,left=10, top=10, width=200, height=250, visible=none');\r\n      this._page.document.write(this._createSpinner(this.options.customWindowTitle, this.options.customSpinnerClass, this.options.spinnerBgCOlor));\r\n    }\r\n    this.originalState = {\r\n      mapWidth: this.mapContainer.style.width,\r\n\t  mapHeight: this.mapContainer.style.height,\r\n      widthWasAuto: false,\r\n      heightWasAuto: false,\r\n      widthWasPercentage: false,\r\n      heightWasPercentage: false,\r\n      zoom: this._map.getZoom(),\r\n      center: this._map.getCenter()\r\n    };\r\n    \r\n    if (this.originalState.mapWidth === 'auto') {\r\n        this.originalState.mapWidth = this._map.getSize().x  + 'px'\r\n      this.originalState.widthWasAuto = true\r\n    } else if (this.originalState.mapWidth.includes('%')) {\r\n      this.originalState.percentageWidth = this.originalState.mapWidth\r\n      this.originalState.widthWasPercentage = true\r\n      this.originalState.mapWidth = this._map.getSize().x  + 'px'\r\n    } else {\r\n        this.originalState.mapWidth = this._map.getSize().x  + 'px'\r\n    }\r\n    \r\n    if (this.originalState.mapHeight === 'auto') {\r\n        this.originalState.mapHeight = this._map.getSize().y  + 'px'\r\n      this.originalState.heightWasAuto = true\r\n    } else if (this.originalState.mapHeight.includes('%')) {\r\n      this.originalState.percentageHeight = this.originalState.mapHeight\r\n      this.originalState.heightWasPercentage = true\r\n      this.originalState.mapHeight = this._map.getSize().y  + 'px'\r\n    } else {\r\n        this.originalState.mapHeight = this._map.getSize().y  + 'px'\r\n    }\r\n    \r\n    this._map.fire(\"easyPrint-start\", { event: event });\r\n    if (!this.options.hidden) {\r\n      this._togglePageSizeButtons({type: null});\r\n    }\r\n    if (this.options.hideControlContainer) {\r\n      this._toggleControls();    \r\n    }\r\n    if (this.options.hideClasses) {\r\n      this._toggleClasses(this.options.hideClasses);\r\n    }\r\n    var sizeMode = typeof event !== 'string' ? event.target.className : event;\r\n    if (sizeMode === 'CurrentSize') {\r\n      return await this._printOpertion(sizeMode);\r\n    }\r\n    this.outerContainer = this._createOuterContainer(this.mapContainer)\r\n    if (this.originalState.widthWasAuto) {\r\n        this.outerContainer.style.width = this.originalState.mapWidth\r\n        this.outerContainer.style.height = this.originalState.mapheight\r\n    }\r\n    this._createImagePlaceholder(sizeMode)\r\n  },\r\n\r\n  _createImagePlaceholder: function (sizeMode) {\r\n    var plugin = this;\r\n    domtoimage.toPng(this.mapContainer, {\r\n        width: parseInt(this.originalState.mapWidth.replace('px')),\r\n        height: parseInt(this.originalState.mapHeight.replace('px'))\r\n      })\r\n      .then(function (dataUrl) {\r\n        plugin.blankDiv = document.createElement(\"div\");\r\n        var blankDiv = plugin.blankDiv;\r\n        plugin.outerContainer.parentElement.insertBefore(blankDiv, plugin.outerContainer);\r\n        blankDiv.className = 'epHolder';\r\n        blankDiv.style.backgroundImage = 'url(\"' + dataUrl + '\")';\r\n        blankDiv.style.position = 'absolute';\r\n        blankDiv.style.zIndex = 1011;\r\n        blankDiv.style.display = 'initial';\r\n        blankDiv.style.width = plugin.originalState.mapWidth;\r\n        blankDiv.style.height = plugin.originalState.mapHeight;\r\n        plugin._resizeAndPrintMap(sizeMode);\r\n      })\r\n      .catch(function (error) {\r\n          console.error('oops, something went wrong!', error);\r\n      });\r\n  },\r\n\r\n  _resizeAndPrintMap: function (sizeMode) {\r\n    this.outerContainer.style.opacity = 0;\r\n    var pageSize = this.options.sizeModes.filter(function (item) {\r\n      return item.className.indexOf(sizeMode) > -1;\r\n    });\r\n    pageSize = pageSize[0]\r\n    this.mapContainer.style.width = pageSize.width + 'px';\r\n    this.mapContainer.style.height = pageSize.height + 'px';\r\n    if (this.mapContainer.style.width > this.mapContainer.style.height) {\r\n      this.orientation = 'portrait';\r\n    } else {\r\n      this.orientation = 'landscape';\r\n    }\r\n    this._map.setView(this.originalState.center);\r\n    this._map.setZoom(this.originalState.zoom);\r\n    this._map.invalidateSize();\r\n    if (this.options.tileLayer) {\r\n      this._pausePrint(sizeMode)\r\n    } else {\r\n      this._printOpertion(sizeMode)\r\n    }\r\n  },\r\n\r\n  _pausePrint: function (sizeMode) {\r\n    var plugin = this\r\n    var loadingTest = setInterval(function () { \r\n      if(!plugin.options.tileLayer.isLoading()) {\r\n        clearInterval(loadingTest);\r\n        plugin._printOpertion(sizeMode)\r\n      }\r\n    }, plugin.options.tileWait);\r\n  },\r\n\r\n  _printOpertion: async function (sizemode) {\r\n    var plugin = this;\r\n    var widthForExport = this.mapContainer.style.width\r\n    var heightForExport = this.mapContainer.style.height\r\n    if (sizemode === 'CurrentSize') {\r\n        widthForExport = this.originalState.mapWidth\r\n        heightForExport = this.originalState.mapHeight\r\n    }\r\n    await domtoimage.toPng(plugin.mapContainer, {\r\n        width: parseInt(widthForExport.replace('px')),\r\n        height: parseInt(heightForExport.replace('px'))\r\n      })\r\n      .then(function (dataUrl) {\r\n          var blob = plugin._dataURItoBlob(dataUrl);\r\n          if (plugin.options.outputMode === 'download') {\r\n            fileSaver.saveAs(blob, plugin.options.filename + '.png');\r\n          } else if (plugin.options.outputMode === 'print') {\r\n            plugin._sendToBrowserPrint(dataUrl, plugin.orientation);\r\n          }\r\n          plugin._toggleControls(true);\r\n          plugin._toggleClasses(plugin.options.hideClasses, true);\r\n\r\n          if (plugin.outerContainer) {\r\n            if (plugin.originalState.heightWasAuto) {\r\n              plugin.mapContainer.style.height = 'auto'\r\n            } else if (plugin.originalState.heightWasPercentage) {\r\n              plugin.mapContainer.style.height = plugin.originalState.percentageHeight\r\n            } else {\r\n              plugin.mapContainer.style.height = plugin.originalState.mapWidth;              \r\n            }\r\n            if (plugin.originalState.widthWasAuto) {\r\n                plugin.mapContainer.style.width = 'auto'\r\n            } else if (plugin.originalState.widthWasPercentage) {\r\n                plugin.mapContainer.style.width = plugin.originalState.percentageWidth\r\n            } else {\r\n                plugin.mapContainer.style.width = plugin.originalState.mapHeight;              \r\n            }\r\n            \r\n            plugin._removeOuterContainer(plugin.mapContainer, plugin.outerContainer, plugin.blankDiv)\r\n            plugin._map.invalidateSize();\r\n            plugin._map.setView(plugin.originalState.center);\r\n            plugin._map.setZoom(plugin.originalState.zoom);\r\n          }\r\n          \r\n          plugin._map.fire(\"easyPrint-finished\", {blob: blob});\r\n          \r\n          return blob;\r\n      })\r\n      .catch(function (error) {\r\n          console.error('Print operation failed', error);\r\n      }); \r\n  },\r\n\r\n  _sendToBrowserPrint: function (img, orientation) {\r\n    this._page.resizeTo(600, 800); \r\n    var pageContent = this._createNewWindow(img, orientation, this)\r\n    this._page.document.body.innerHTML = ''\r\n    this._page.document.write(pageContent);\r\n    this._page.document.close();  \r\n  },\r\n\r\n  _createSpinner: function (title, spinnerClass, spinnerColor) {\r\n    return `<html><head><title>`+ title + `</title></head><body><style>\r\n      body{\r\n        background: ` + spinnerColor + `;\r\n      }\r\n      .epLoader,\r\n      .epLoader:before,\r\n      .epLoader:after {\r\n        border-radius: 50%;\r\n      }\r\n      .epLoader {\r\n        color: #ffffff;\r\n        font-size: 11px;\r\n        text-indent: -99999em;\r\n        margin: 55px auto;\r\n        position: relative;\r\n        width: 10em;\r\n        height: 10em;\r\n        box-shadow: inset 0 0 0 1em;\r\n        -webkit-transform: translateZ(0);\r\n        -ms-transform: translateZ(0);\r\n        transform: translateZ(0);\r\n      }\r\n      .epLoader:before,\r\n      .epLoader:after {\r\n        position: absolute;\r\n        content: '';\r\n      }\r\n      .epLoader:before {\r\n        width: 5.2em;\r\n        height: 10.2em;\r\n        background: #0dc5c1;\r\n        border-radius: 10.2em 0 0 10.2em;\r\n        top: -0.1em;\r\n        left: -0.1em;\r\n        -webkit-transform-origin: 5.2em 5.1em;\r\n        transform-origin: 5.2em 5.1em;\r\n        -webkit-animation: load2 2s infinite ease 1.5s;\r\n        animation: load2 2s infinite ease 1.5s;\r\n      }\r\n      .epLoader:after {\r\n        width: 5.2em;\r\n        height: 10.2em;\r\n        background: #0dc5c1;\r\n        border-radius: 0 10.2em 10.2em 0;\r\n        top: -0.1em;\r\n        left: 5.1em;\r\n        -webkit-transform-origin: 0px 5.1em;\r\n        transform-origin: 0px 5.1em;\r\n        -webkit-animation: load2 2s infinite ease;\r\n        animation: load2 2s infinite ease;\r\n      }\r\n      @-webkit-keyframes load2 {\r\n        0% {\r\n          -webkit-transform: rotate(0deg);\r\n          transform: rotate(0deg);\r\n        }\r\n        100% {\r\n          -webkit-transform: rotate(360deg);\r\n          transform: rotate(360deg);\r\n        }\r\n      }\r\n      @keyframes load2 {\r\n        0% {\r\n          -webkit-transform: rotate(0deg);\r\n          transform: rotate(0deg);\r\n        }\r\n        100% {\r\n          -webkit-transform: rotate(360deg);\r\n          transform: rotate(360deg);\r\n        }\r\n      }\r\n      </style>\r\n    <div class=\"`+spinnerClass+`\">Loading...</div></body></html>`;\r\n  },\r\n\r\n  _createNewWindow: function (img, orientation, plugin) {\r\n    return `<html><head>\r\n        <style>@media print {\r\n          img { max-width: 98%!important; max-height: 98%!important; }\r\n          @page { size: ` + orientation + `;}}\r\n        </style>\r\n        <script>function step1(){\r\n        setTimeout('step2()', 10);}\r\n        function step2(){window.print();window.close()}\r\n        </script></head><body onload='step1()'>\r\n        <img src=\"` + img + `\" style=\"display:block; margin:auto;\"></body></html>`;\r\n  },\r\n\r\n  _createOuterContainer: function (mapDiv) {\r\n    var outerContainer = document.createElement('div'); \r\n    mapDiv.parentNode.insertBefore(outerContainer, mapDiv); \r\n    mapDiv.parentNode.removeChild(mapDiv);\r\n    outerContainer.appendChild(mapDiv);\r\n    outerContainer.style.width = mapDiv.style.width;\r\n    outerContainer.style.height = mapDiv.style.height;\r\n    outerContainer.style.display = 'inline-block'\r\n    outerContainer.style.overflow = 'hidden';\r\n    return outerContainer;\r\n  },\r\n\r\n  _removeOuterContainer: function (mapDiv, outerContainer, blankDiv) {\r\n    if (outerContainer.parentNode) {\r\n      outerContainer.parentNode.insertBefore(mapDiv, outerContainer);\r\n      outerContainer.parentNode.removeChild(blankDiv);\r\n      outerContainer.parentNode.removeChild(outerContainer);      \r\n    }\r\n  },\r\n\r\n  _addCss: function () {\r\n    var css = document.createElement(\"style\");\r\n    css.type = \"text/css\";\r\n    css.innerHTML = `.leaflet-control-easyPrint-button { \r\n      background-image: url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPGc+Cgk8cGF0aCBkPSJNMTI4LDMyaDI1NnY2NEgxMjhWMzJ6IE00ODAsMTI4SDMyYy0xNy42LDAtMzIsMTQuNC0zMiwzMnYxNjBjMCwxNy42LDE0LjM5OCwzMiwzMiwzMmg5NnYxMjhoMjU2VjM1Mmg5NiAgIGMxNy42LDAsMzItMTQuNCwzMi0zMlYxNjBDNTEyLDE0Mi40LDQ5Ny42LDEyOCw0ODAsMTI4eiBNMzUyLDQ0OEgxNjBWMjg4aDE5MlY0NDh6IE00ODcuMTk5LDE3NmMwLDEyLjgxMy0xMC4zODcsMjMuMi0yMy4xOTcsMjMuMiAgIGMtMTIuODEyLDAtMjMuMjAxLTEwLjM4Ny0yMy4yMDEtMjMuMnMxMC4zODktMjMuMiwyMy4xOTktMjMuMkM0NzYuODE0LDE1Mi44LDQ4Ny4xOTksMTYzLjE4Nyw0ODcuMTk5LDE3NnoiIGZpbGw9IiMwMDAwMDAiLz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K);\r\n      background-size: 16px 16px; \r\n      cursor: pointer; \r\n    }\r\n    .leaflet-control-easyPrint-button-export { \r\n      background-image: url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCIgdmlld0JveD0iMCAwIDQzMy41IDQzMy41IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0MzMuNSA0MzMuNTsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8Zz4KCTxnIGlkPSJmaWxlLWRvd25sb2FkIj4KCQk8cGF0aCBkPSJNMzk1LjI1LDE1M2gtMTAyVjBoLTE1M3YxNTNoLTEwMmwxNzguNSwxNzguNUwzOTUuMjUsMTUzeiBNMzguMjUsMzgyLjV2NTFoMzU3di01MUgzOC4yNXoiIGZpbGw9IiMwMDAwMDAiLz4KCTwvZz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K);\r\n      background-size: 16px 16px; \r\n      cursor: pointer; \r\n    }\r\n    .easyPrintHolder a {\r\n      background-size: 16px 16px;\r\n      cursor: pointer;\r\n    }\r\n    .easyPrintHolder .CurrentSize{\r\n      background-image: url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTZweCIgdmVyc2lvbj0iMS4xIiBoZWlnaHQ9IjE2cHgiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNjQgNjQiPgogIDxnPgogICAgPGcgZmlsbD0iIzFEMUQxQiI+CiAgICAgIDxwYXRoIGQ9Ik0yNS4yNTUsMzUuOTA1TDQuMDE2LDU3LjE0NVY0Ni41OWMwLTEuMTA4LTAuODk3LTIuMDA4LTIuMDA4LTIuMDA4QzAuODk4LDQ0LjU4MiwwLDQ1LjQ4MSwwLDQ2LjU5djE1LjQwMiAgICBjMCwwLjI2MSwwLjA1MywwLjUyMSwwLjE1NSwwLjc2N2MwLjIwMywwLjQ5MiwwLjU5NCwwLjg4MiwxLjA4NiwxLjA4N0MxLjQ4Niw2My45NDcsMS43NDcsNjQsMi4wMDgsNjRoMTUuNDAzICAgIGMxLjEwOSwwLDIuMDA4LTAuODk4LDIuMDA4LTIuMDA4cy0wLjg5OC0yLjAwOC0yLjAwOC0yLjAwOEg2Ljg1NWwyMS4yMzgtMjEuMjRjMC43ODQtMC43ODQsMC43ODQtMi4wNTUsMC0yLjgzOSAgICBTMjYuMDM5LDM1LjEyMSwyNS4yNTUsMzUuOTA1eiIgZmlsbD0iIzAwMDAwMCIvPgogICAgICA8cGF0aCBkPSJtNjMuODQ1LDEuMjQxYy0wLjIwMy0wLjQ5MS0wLjU5NC0wLjg4Mi0xLjA4Ni0xLjA4Ny0wLjI0NS0wLjEwMS0wLjUwNi0wLjE1NC0wLjc2Ny0wLjE1NGgtMTUuNDAzYy0xLjEwOSwwLTIuMDA4LDAuODk4LTIuMDA4LDIuMDA4czAuODk4LDIuMDA4IDIuMDA4LDIuMDA4aDEwLjU1NmwtMjEuMjM4LDIxLjI0Yy0wLjc4NCwwLjc4NC0wLjc4NCwyLjA1NSAwLDIuODM5IDAuMzkyLDAuMzkyIDAuOTA2LDAuNTg5IDEuNDIsMC41ODlzMS4wMjctMC4xOTcgMS40MTktMC41ODlsMjEuMjM4LTIxLjI0djEwLjU1NWMwLDEuMTA4IDAuODk3LDIuMDA4IDIuMDA4LDIuMDA4IDEuMTA5LDAgMi4wMDgtMC44OTkgMi4wMDgtMi4wMDh2LTE1LjQwMmMwLTAuMjYxLTAuMDUzLTAuNTIyLTAuMTU1LTAuNzY3eiIgZmlsbD0iIzAwMDAwMCIvPgogICAgPC9nPgogIDwvZz4KPC9zdmc+Cg==)\r\n    }\r\n    .easyPrintHolder .page {\r\n      background-image: url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTguMS4xLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ0NC44MzMgNDQ0LjgzMyIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDQ0LjgzMyA0NDQuODMzOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij4KPGc+Cgk8Zz4KCQk8cGF0aCBkPSJNNTUuMjUsNDQ0LjgzM2gzMzQuMzMzYzkuMzUsMCwxNy03LjY1LDE3LTE3VjEzOS4xMTdjMC00LjgxNy0xLjk4My05LjM1LTUuMzgzLTEyLjQ2N0wyNjkuNzMzLDQuNTMzICAgIEMyNjYuNjE3LDEuNywyNjIuMzY3LDAsMjU4LjExNywwSDU1LjI1Yy05LjM1LDAtMTcsNy42NS0xNywxN3Y0MTAuODMzQzM4LjI1LDQzNy4xODMsNDUuOSw0NDQuODMzLDU1LjI1LDQ0NC44MzN6ICAgICBNMzcyLjU4MywxNDYuNDgzdjAuODVIMjU2LjQxN3YtMTA4LjhMMzcyLjU4MywxNDYuNDgzeiBNNzIuMjUsMzRoMTUwLjE2N3YxMzAuMzMzYzAsOS4zNSw3LjY1LDE3LDE3LDE3aDEzMy4xNjd2MjI5LjVINzIuMjVWMzR6ICAgICIgZmlsbD0iIzAwMDAwMCIvPgoJPC9nPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=);\r\n    }\r\n    .easyPrintHolder .A4Landscape { \r\n      transform: rotate(-90deg);\r\n    }\r\n\r\n    .leaflet-control-easyPrint-button{\r\n      display: inline-block;\r\n    }\r\n    .easyPrintHolder{\r\n      margin-top:-31px;\r\n      margin-bottom: -5px;\r\n      margin-left: 30px;\r\n      padding-left: 0px;\r\n      display: none;\r\n    }\r\n\r\n    .easyPrintSizeMode {\r\n      display: inline-block;\r\n    }\r\n    .easyPrintHolder .easyPrintSizeMode a {\r\n      border-radius: 0px;\r\n    }\r\n\r\n    .easyPrintHolder .easyPrintSizeMode:last-child a{\r\n      border-top-right-radius: 2px;\r\n      border-bottom-right-radius: 2px;\r\n      margin-left: -1px;\r\n    }\r\n\r\n    .easyPrintPortrait:hover, .easyPrintLandscape:hover{\r\n      background-color: #757570;\r\n      cursor: pointer;\r\n    }`;\r\n    document.body.appendChild(css);\r\n  },\r\n\r\n  _dataURItoBlob: function (dataURI) {\r\n    var byteString = atob(dataURI.split(',')[1]);\r\n    var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\r\n    var ab = new ArrayBuffer(byteString.length);\r\n    var dw = new DataView(ab);\r\n    for(var i = 0; i < byteString.length; i++) {\r\n        dw.setUint8(i, byteString.charCodeAt(i));\r\n    }\r\n    return new Blob([ab], {type: mimeString});\r\n  },\r\n\r\n  _togglePageSizeButtons: function (e) {\r\n    var holderStyle = this.holder.style\r\n    var linkStyle = this.link.style\r\n    if (e.type === 'mouseover') {\r\n      holderStyle.display = 'block';\r\n      linkStyle.borderTopRightRadius = '0'\r\n      linkStyle.borderBottomRightRadius = '0'\r\n    } else {\r\n      holderStyle.display = 'none';\r\n      linkStyle.borderTopRightRadius = '2px'\r\n      linkStyle.borderBottomRightRadius = '2px'      \r\n    }\r\n  },\r\n\r\n  _toggleControls: function (show) {\r\n    var controlContainer = document.getElementsByClassName(\"leaflet-control-container\")[0];\r\n    if (show) return controlContainer.style.display = 'block';\r\n    controlContainer.style.display = 'none';\r\n  },\r\n  _toggleClasses: function (classes, show) {\r\n    classes.forEach(function (className) {\r\n      var div = document.getElementsByClassName(className)[0];\r\n      if (show) return div.style.display = 'block';\r\n      div.style.display = 'none';\r\n    });\r\n  },\r\n\r\n  _a4PageSize: {\r\n    height: 715,\r\n    width: 1045\r\n  }\r\n\r\n});\r\n\r\nL.easyPrint = function(options) {\r\n  return new L.Control.EasyPrint(options);\r\n};\r\n\r\n"],"names":["domtoimage","require","fileSaver","L","Control","EasyPrint","extend","window","document","title","mapContainer","this","_map","getContainer","options","sizeModes","map","sizeMode","defaultSizeTitles","Current","_a4PageSize","height","width","A4Landscape","A4Portrait","container","DomUtil","create","hidden","_addCss","DomEvent","addListener","_togglePageSizeButtons","on","ev","stopPropagation","btnClass","outputMode","link","id","holder","forEach","btn","name","className","printMap","disableClickPropagation","event","filename","_page","open","write","_createSpinner","customWindowTitle","customSpinnerClass","spinnerBgCOlor","originalState","style","getZoom","getCenter","mapWidth","getSize","x","widthWasAuto","includes","percentageWidth","widthWasPercentage","mapHeight","y","heightWasAuto","percentageHeight","heightWasPercentage","fire","type","hideControlContainer","_toggleControls","hideClasses","_toggleClasses","target","_printOpertion","outerContainer","_createOuterContainer","mapheight","_createImagePlaceholder","plugin","toPng","parseInt","replace","then","dataUrl","blankDiv","createElement","parentElement","insertBefore","backgroundImage","position","zIndex","display","_resizeAndPrintMap","catch","error","opacity","pageSize","filter","item","indexOf","orientation","setView","center","setZoom","zoom","invalidateSize","tileLayer","_pausePrint","loadingTest","setInterval","isLoading","tileWait","sizemode","widthForExport","heightForExport","blob","_dataURItoBlob","saveAs","_sendToBrowserPrint","_removeOuterContainer","img","resizeTo","pageContent","_createNewWindow","body","innerHTML","close","spinnerClass","spinnerColor","mapDiv","parentNode","removeChild","appendChild","overflow","css","dataURI","byteString","atob","split","mimeString","ab","ArrayBuffer","length","dw","DataView","i","setUint8","charCodeAt","Blob","e","holderStyle","linkStyle","borderTopRightRadius","borderBottomRightRadius","show","controlContainer","getElementsByClassName","classes","div","easyPrint"],"mappings":"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"}